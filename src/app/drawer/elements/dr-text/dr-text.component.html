<ng-template #elementTemplate>
  <ng-container *ngIf="data && visualData">
      <svg:clipPath [id]="data.id + 'clip'">
          <svg:rect
            [attr.x]="visualData.x"
            [attr.y]="visualData.y"
            [attr.width]="visualData.width"
            [attr.height]="visualData.height">
          </svg:rect>
        </svg:clipPath>
    
        <svg:rect
          [ngClass]="visualData.clickable ? hoverClass : ''"
          (click)="onClick($event, data)"
          (mousedown)="onMouseDown($event, data)"
          (mousemove)="onMouseMove($event, data)"
          (mouseup)="onMouseUp($event, data)"
          
          [id]="data.id"
          [attr.x]="visualData.x"
          [attr.y]="visualData.y"
          [attr.stroke-dasharray]="visualData.dashedLine ? '10 10' : ''"
          [attr.width]="visualData.width"
          [attr.height]="visualData.height"
          [attr.fill]="visualData.showFill ? data.fill : 'transparent'"
          [attr.stroke]="visualData.showStroke ? data.stroke : 'transparent'"
          [attr.stroke-width]="visualData.strokeWidth"
          [attr.opacity]="visualData.opacity">
        </svg:rect>
        <svg:g [attr.clip-path]="'url(#' + data.id + 'clip)'">
          <svg:text 
            (click)="onClick($event, data)"
            (mousedown)="onMouseDown($event, data)"
            (mousemove)="onMouseMove($event, data)"
            (mouseup)="onMouseUp($event, data)"

            [attr.x]="getTextX()" 
            [attr.y]="getTextY()"
            [attr.fill]="visualData.fontColor"
            [attr.font-size]="visualData.size + 'px'"
            [attr.font-family]="visualData.fontFamily"
            [attr.font-weight]="visualData.bold ? 'bold' : 'normal'"
            [attr.font-style]="visualData.italic ? 'italic' : 'normal'"
            [attr.alignment-baseline]="getVAlignment()"
            [attr.text-anchor]="getHAlignment()">
            {{ visualData.text }}
            
          </svg:text>
        </svg:g>
  </ng-container>
</ng-template>